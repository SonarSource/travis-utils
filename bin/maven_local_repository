#!/bin/bash
# Usage: maven_local_repository
# Resolves the location of the Maven local repository. Can be different than ~/.m2/repository

set -euo pipefail

# M2_HOME is the env variable supported by Maven 2 and 3
# If not set, then extract the setting from Maven execution
if [ -z "${M2_HOME:=}" ]; then
  mvn help:evaluate -Dexpression=settings.localRepository | grep -v '^[[]' | tail -1
else
  echo "${M2_HOME}/repository"
fi
