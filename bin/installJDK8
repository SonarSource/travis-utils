#!/bin/bash

# download and unzip jdk8 to ~/jvm directory

set -euo pipefail
JDK_RELEASE=161
echo "Setup JDK 1.8u$JDK_RELEASE"
mkdir -p ~/jvm
pushd ~/jvm > /dev/null

if [ ! -d "jdk1.8.0_$JDK_RELEASE" ]; then
  {
    wget --quiet --continue --header "Cookie: oraclelicense=accept-securebackup-cookie" http://download.oracle.com/otn-pub/java/jdk/8u161-b12/2f38c3b165be4555a1fa6e98c45e0808/jdk-8u161-linux-x64.tar.gz
  } || {
    echo "failed to download JDK 1.8u$JDK_RELEASE"
    exit 1
  }
  tar xzf jdk-8u$JDK_RELEASE-linux-x64.tar.gz
  rm jdk-8u$JDK_RELEASE-linux-x64.tar.gz
fi
popd > /dev/null
export JAVA_HOME=~/jvm/jdk1.8.0_$JDK_RELEASE
export PATH=$JAVA_HOME/bin:$PATH
echo "JDK 1.8u$JDK_RELEASE installed"